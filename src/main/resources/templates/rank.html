<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="우리팀">
        <meta name="description" content="게시판">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://kit.fontawesome.com/021ba766ac.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../css/list_style.css">
        <title>랭킹</title>
    </head>
    <body>
        <div id="web">
            <header>
                <h1><a href="/"><img src="http://placehold.it/300x70?text=logo" alt="logo"></a></h1>
                <div id="login">
                    <p><a href="../login"><i class="fa-solid fa-right-to-bracket" alt="로그인"title="로그인"></i></a></p>
                    <p><a href="#"><i class="fa-solid fa-user" alt="마이페이지" title="마이페이지"></i></a></p>
                    <p><a href="../servicecenter/main"><i class="fa-solid fa-headphones" alt="고객센터"title="고객센터"></i></a></p>
                    <p><a href="#"><i class="fa-solid fa-magnifying-glass" alt="검색"title="검색"></i></a><input type="text" size="12px"></p>
                </div>
                <nav>
                    <ul class="row">
                        <li><a href="notice">공지사항</a>
                            <ul>
                                <li></li>
                            </ul>
                        </li>
                        <li><a href="fight">대전 / 협동</a>
                            <ul>
                                <li></li>
                            </ul>
                        </li>
                        <li><a href="list">게시판</a>
                            <ul>
                                <li></li>
                            </ul>
                        </li>
                        <li><a href="mypage/doyun">마이 페이지</a>
                            <ul>
                                <li></li>
                            </ul>
                        </li>
                        <li><a href="shop">아이템샾</a>
                            <ul>
                                <li></li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </header>
            <section>
                <div class="row content">
                    <div class="list">
                        <div class="con_title">
                            <h3>랭킹</h3>
                            <p>HOME &gt; <strong>랭킹</strong></p>
                        </div>
                        <!-- 랭킹 별 차트 구문 -->
                        <canvas id="win" style='width:600px; height:30vh; display: inline-block;'></canvas>
                        <canvas id="attend" style='width:600px; height:30vh; display: inline-block;'></canvas>
                        <canvas id="level" style='width:600px; height:30vh; display: inline-block;'></canvas>
                        <canvas id="point" style='width:600px; height:30vh; display: inline-block;'></canvas>
                        <script type="text/javascript">
                            var WinRankings = "[[${winrank}]]";
                            var LevelRankings = "[[${levelrank}]]";
                            var AttendRankings = "[[${attendrank}]]";
                            var PointRankings = "[[${pointrank}]]";

                            let WinRanks = WinRankings.split(",");
                            let LevelRanks = LevelRankings.split(",");
                            let AttendRanks = AttendRankings.split(",");
                            let PointRanks = PointRankings.split(",");

                            WinRanks[0] = WinRanks[0].substring(1);
                            WinRanks[WinRanks.length - 1] = WinRanks[WinRanks.length - 1].split("]")[0];

                            LevelRanks[0] = LevelRanks[0].substring(1);
                            LevelRanks[LevelRanks.length - 1] = LevelRanks[LevelRanks.length - 1].split("]")[0];

                            AttendRanks[0] = AttendRanks[0].substring(1);
                            AttendRanks[AttendRanks.length - 1] = AttendRanks[AttendRanks.length - 1].split("]")[0];

                            PointRanks[0] = PointRanks[0].substring(1);
                            PointRanks[PointRanks.length - 1] = PointRanks[PointRanks.length - 1].split("]")[0];

                            var WinChart = new Chart(
                                document.getElementById('win'),
                                {
                                    type: 'line',
                                    data: {
                                        labels: [],
                                        datasets: [
                                            {
                                            label: '승률 별 인구수',
                                            data: ({0:WinRanks[0], 10:WinRanks[1], 20:WinRanks[2], 30:WinRanks[3], 40:WinRanks[4], 50:WinRanks[5], 60:WinRanks[6], 70:WinRanks[7], 80:WinRanks[8], 90:WinRanks[9]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            },
                                            {
                                            label: '승률 별 인구수',
                                            data: ({0:WinRanks[0], 10:WinRanks[1], 20:WinRanks[2], 30:WinRanks[3], 40:WinRanks[4], 50:WinRanks[5], 60:WinRanks[6], 70:WinRanks[7], 80:WinRanks[8], 90:WinRanks[9]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            backgroundColor: '#000000',
                                            type:'bar'
                                            }
                                        ]
                                        },
                                    options: {
                                        responsive: false,
                                        interaction: {
                                        intersect: false,
                                        axis: 'x'
                                        },
                                        plugins: {
                                        title: {
                                            display: true,
                                            text: (ctx) => '승률 별 유저 분포도',
                                        },
                                        legend:{
                                            display : false
                                        }
                                        }
                                    }
                                    });

                            var AttendChart = new Chart(
                                document.getElementById('attend'),
                                {
                                    type: 'line',
                                    data: {
                                        labels: [],
                                        datasets: [
                                            {
                                            label: '출석 일수',
                                            data: ({0:AttendRanks[0], 50:AttendRanks[1], 100:AttendRanks[2], 150:AttendRanks[3], 200:AttendRanks[4], 250:AttendRanks[5], 300:AttendRanks[6]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            },
                                            {
                                            label: '출석 일수',
                                            data: ({0:AttendRanks[0], 50:AttendRanks[1], 100:AttendRanks[2], 150:AttendRanks[3], 200:AttendRanks[4], 250:AttendRanks[5], 300:AttendRanks[6]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            backgroundColor: '#000000',
                                            type:'bar'
                                            }
                                        ]
                                        },
                                    options: {
                                        responsive: false,
                                        interaction: {
                                        intersect: false,
                                        axis: 'x'
                                        },
                                        plugins: {
                                        title: {
                                            display: true,
                                            text: (ctx) => '출석일 수 유저 분포도',
                                        },
                                        legend:{
                                            display : false
                                        }
                                        }
                                    }
                                    });

                            var LevelChart = new Chart(
                                document.getElementById('level'),
                                {
                                    type: 'line',
                                    data: {
                                        labels: [],
                                        datasets: [
                                            {
                                            label: '레벨 구간 별 인구수',
                                            data: ({0:LevelRanks[0], 10:LevelRanks[1], 20:LevelRanks[2], 30:LevelRanks[3], 40:LevelRanks[4], 50:LevelRanks[5], 60:LevelRanks[6], 70:LevelRanks[7], 80:LevelRanks[8], 90:LevelRanks[9]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            },
                                            {
                                            label: '레벨 구간 별 인구수',
                                            data: ({0:LevelRanks[0], 10:LevelRanks[1], 20:LevelRanks[2], 30:LevelRanks[3], 40:LevelRanks[4], 50:LevelRanks[5], 60:LevelRanks[6], 70:LevelRanks[7], 80:LevelRanks[8], 90:LevelRanks[9]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            backgroundColor: '#000000',
                                            type:'bar'
                                            }
                                        ]
                                        },
                                    options: {
                                        responsive: false,
                                        interaction: {
                                        intersect: false,
                                        axis: 'x'
                                        },
                                        plugins: {
                                        title: {
                                            display: true,
                                            text: (ctx) => '레벨 구간 별 유저 분포도',
                                        },
                                        legend:{
                                            display : false
                                        }
                                        }
                                    }
                                    });

                            var PointChart = new Chart(
                                document.getElementById('point'),
                                {
                                    type: 'line',
                                    data: {
                                        labels: [],
                                        datasets: [
                                            {
                                            label: '포인트 보유',
                                            data: ({0:PointRanks[0], 50:PointRanks[1], 100:PointRanks[2], 150:PointRanks[3], 200:PointRanks[4]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            },
                                            {
                                            label: '포인트 보유',
                                            data: ({0:PointRanks[0], 50:PointRanks[1], 100:PointRanks[2], 150:PointRanks[3], 200:PointRanks[4]}),
                                            borderColor: 'rgb(75, 0, 192)',
                                            fill: false,
                                            stepped: false,
                                            backgroundColor: '#000000',
                                            type:'bar'
                                            }
                                        ]
                                        },
                                    options: {
                                        responsive: false,
                                        interaction: {
                                        intersect: false,
                                        axis: 'x'
                                        },
                                        plugins: {
                                        title: {
                                            display: true,
                                            text: (ctx) => '포인트 보유량 유저 분포도',
                                        },
                                        legend:{
                                            display : false
                                        }
                                        }
                                    }
                                    });
                        </script>
                    </div>
                </div>
            </section>
            <footer>
                
            </footer>
        </div>
    </body>
</html>